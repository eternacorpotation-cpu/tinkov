<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vocab Master Pro</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        .animate-in { animation: fadeIn 0.5s ease-out forwards; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Custom Icon Component to handle Lucide in browser
        const Icon = ({ name, size = 24, strokeWidth = 2, className = "" }) => {
            const [iconSvg, setIconSvg] = useState("");
            
            useEffect(() => {
                // Lucide names are camelCase in the library but kebab-case in the API often
                // We use lucide.createIcons or just access the string
                if (window.lucide && window.lucide.icons[name]) {
                    const icon = window.lucide.icons[name];
                    // Manual SVG creation as fallback for simple browser usage
                }
            }, [name]);

            // Simplified approach: Use Lucide's createIcons after render
            return <i data-lucide={name} style={{width: size, height: size}} className={className}></i>;
        };

        const vocabulary = [
            { id: 1, de: "Girokonto", en: "current account / checking account", cat: "Konten" },
            { id: 2, de: "Überziehungskredit, Dispokredit", en: "overdraft facility", cat: "Konten" },
            { id: 3, de: "etw. (Gebühr usw.) verlangen, etw. berechnen", en: "to charge sth", cat: "Gebühren" },
            { id: 4, de: "Überweisung, Geldanweisung", en: "money transfer", cat: "Transaktionen" },
            { id: 5, de: "Gebühr", en: "fee", cat: "Gebühren" },
            { id: 6, de: "Pauschalgebühr, Pauschale", en: "flat fee", cat: "Gebühren" },
            { id: 7, de: "etw. berechnen", en: "to calculate sth", cat: "Gebühren" },
            { id: 8, de: "Zusatzgebühr", en: "additional charge", cat: "Gebühren" },
            { id: 9, de: "Abhebung", en: "withdrawal", cat: "Transaktionen" },
            { id: 10, de: "unterschreiben", en: "to sign", cat: "Dokumente" },
            { id: 11, de: "bis (zu)", en: "up to", cat: "Allgemeн" },
            { id: 12, de: "etw. sparen", en: "to save sth", cat: "Transaktionen" },
            { id: 13, de: "Obergrenze, Limit", en: "limit", cat: "Allgemeн" },
            { id: 14, de: "Informationsblatt, Broschüre, Prospekt", en: "leaflet", cat: "Dokumente" },
            { id: 15, de: "gültig", en: "valid", cat: "Dokumente" },
            { id: 16, de: "Reisepass", en: "passport", cat: "Dokumente" },
            { id: 17, de: "Aufenthaltserlaubnis", en: "residence permit", cat: "Dokumente" },
            { id: 18, de: "Arbeitserlaubnis", en: "work permit", cat: "Dokumente" },
            { id: 19, de: "Anmeldebescheinigung", en: "proof of registration", cat: "Dokumente" },
            { id: 20, de: "Bescheinigung, Zertifikat", en: "certificate", cat: "Dokumente" },
            { id: 21, de: "Arbeitsvertrag", en: "work contract", cat: "Dokumente" },
            { id: 22, de: "Gehaltsabrechnung", en: "salary statement", cat: "Dokumente" },
            { id: 23, de: "Einkommensnachweis", en: "proof of income", cat: "Dokumente" },
            { id: 24, de: "etw. einreichen", en: "to submit sth", cat: "Dokumente" },
            { id: 25, de: "monatlich, Monats-", en: "monthly", cat: "Allgemeн" },
            { id: 26, de: "Ausweisdokument", en: "personal identification", cat: "Dokumente" },
            { id: 27, de: "Identitätsnachweis", en: "proof of identity", cat: "Dokumente" },
            { id: 28, de: "Einkommen, Einkünfte", en: "income", cat: "Allgemeн" },
            { id: 29, de: "Überweisung", en: "bank transfer", cat: "Transaktionen" },
            { id: 30, de: "Lastschrift, Abbuchung", en: "direct debit", cat: "Transaktionen" },
            { id: 31, de: "Dauerauftrag", en: "standing order", cat: "Transaktionen" },
            { id: 32, de: "Bankgeschäfte", en: "bank transactions", cat: "Transaktionen" },
            { id: 33, de: "Gemeinschaftskonto", en: "joint account", cat: "Konten" },
            { id: 34, de: "etw. jds. Konto gutschreiben", en: "to credit sb's account with sth", cat: "Transaktionen" },
            { id: 35, de: "Sparkonto", en: "savings account", cat: "Konten" },
            { id: 36, de: "Termingeldkonto, Festgeldkonto", en: "time deposit account", cat: "Konten" },
            { id: 37, de: "Zins(en)", en: "interest", cat: "Allgemeн" },
            { id: 38, de: "Zinssatz", en: "interest rate", cat: "Allgemeн" },
            { id: 39, de: "fest, fix", en: "fixed", cat: "Allgemeн" },
            { id: 40, de: "Laufzeit", en: "term", cat: "Allgemeн" }
        ];

        const categories = ["Alle", "Konten", "Gebühren", "Dokumente", "Transaktionen", "Allgemeн"];

        function App() {
            const [selectedCategory, setSelectedCategory] = useState("Alle");
            const [currentDeck, setCurrentDeck] = useState([]);
            const [currentIndex, setCurrentIndex] = useState(0);
            const [isFlipped, setIsFlipped] = useState(false);
            const [learnedIds, setLearnedIds] = useState(new Set());
            const [failedIds, setFailedIds] = useState(new Set());
            const [isFinished, setIsFinished] = useState(false);
            const [isReviewMode, setIsReviewMode] = useState(false);

            useEffect(() => {
                startNewSession(selectedCategory);
            }, [selectedCategory]);

            // Re-trigger lucide icons on every render where icons might change
            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            });

            const startNewSession = (category) => {
                let filtered = category === "Alle" 
                    ? [...vocabulary] 
                    : vocabulary.filter(item => item.cat === category);
                
                filtered = filtered.sort(() => Math.random() - 0.5);
                
                setCurrentDeck(filtered);
                setCurrentIndex(0);
                setIsFlipped(false);
                setLearnedIds(new Set());
                setFailedIds(new Set());
                setIsFinished(false);
                setIsReviewMode(false);
            };

            const startReviewFailed = () => {
                const failedOnes = vocabulary.filter(item => failedIds.has(item.id));
                setCurrentDeck(failedOnes.sort(() => Math.random() - 0.5));
                setCurrentIndex(0);
                setIsFlipped(false);
                setLearnedIds(new Set());
                setFailedIds(new Set());
                setIsFinished(false);
                setIsReviewMode(true);
            };

            const handleResponse = (isCorrect) => {
                const currentItem = currentDeck[currentIndex];
                
                if (isCorrect) {
                    setLearnedIds(prev => new Set(prev).add(currentItem.id));
                    setFailedIds(prev => {
                        const next = new Set(prev);
                        next.delete(currentItem.id);
                        return next;
                    });
                } else {
                    setFailedIds(prev => new Set(prev).add(currentItem.id));
                }

                if (currentIndex < currentDeck.length - 1) {
                    setCurrentIndex(prev => prev + 1);
                    setIsFlipped(false);
                } else {
                    setIsFinished(true);
                }
            };

            if (currentDeck.length === 0) return null;

            const progress = (currentIndex / currentDeck.length) * 100;

            return (
                <div className="min-h-screen bg-[#f1f5f9] p-4 md:p-8 flex flex-col items-center font-sans text-[#0f172a]">
                    <div className="max-w-2xl w-full">
                        <header className="mb-6 text-center">
                            <h1 className="text-4xl font-black text-indigo-600 tracking-tight mb-1 italic uppercase">VOCAB MASTER</h1>
                            <div className="flex items-center justify-center gap-2 text-slate-400 font-bold text-[10px] tracking-[0.2em] uppercase">
                                <span className="h-px w-8 bg-slate-200"></span>
                                German ➔ English: Finance
                                <span className="h-px w-8 bg-slate-200"></span>
                            </div>
                        </header>

                        {!isFinished ? (
                            <>
                                {!isReviewMode && (
                                    <div className="flex flex-wrap gap-2 justify-center mb-8">
                                        {categories.map(cat => (
                                            <button
                                                key={cat}
                                                onClick={() => setSelectedCategory(cat)}
                                                className={`px-4 py-1.5 rounded-full text-[11px] font-black transition-all border-2 ${
                                                    selectedCategory === cat 
                                                    ? "bg-indigo-600 border-indigo-600 text-white shadow-lg" 
                                                    : "bg-white border-slate-200 text-slate-500 hover:border-indigo-300"
                                                }`}
                                            >
                                                {cat.toUpperCase()}
                                            </button>
                                        ))}
                                    </div>
                                )}

                                {isReviewMode && (
                                    <div className="bg-amber-100 text-amber-800 border-2 border-amber-200 px-6 py-3 rounded-3xl text-center mb-8 font-black text-xs flex items-center justify-center gap-3 animate-pulse uppercase">
                                        <i data-lucide="brain"></i> Mastering Mistakes
                                    </div>
                                )}

                                <div className="w-full bg-slate-200 h-2 rounded-full mb-8 overflow-hidden">
                                    <div 
                                        className="bg-indigo-500 h-full transition-all duration-500 ease-out shadow-[0_0_10px_rgba(99,102,241,0.5)]"
                                        style={{ width: `${progress}%` }}
                                    />
                                </div>

                                <div className="flex justify-between items-end mb-4 px-1">
                                    <div className="flex flex-col">
                                        <span className="text-[10px] font-black text-slate-400 uppercase tracking-widest">Progress</span>
                                        <div className="flex items-baseline">
                                           <span className="text-4xl font-black text-slate-800 leading-none">{currentIndex + 1}</span>
                                           <span className="text-xl font-bold text-slate-300 ml-1">/ {currentDeck.length}</span>
                                        </div>
                                    </div>
                                    <div className="flex gap-3">
                                        <div className="bg-white px-4 py-2 rounded-2xl text-center border-b-4 border-green-200 min-w-[75px]">
                                            <span className="block text-[9px] font-black text-green-600 uppercase">Learned</span>
                                            <span className="text-lg font-bold text-green-700">{learnedIds.size}</span>
                                        </div>
                                        <div className="bg-white px-4 py-2 rounded-2xl text-center border-b-4 border-red-200 min-w-[75px]">
                                            <span className="block text-[9px] font-black text-red-500 uppercase">Mistakes</span>
                                            <span className="text-lg font-bold text-red-700">{failedIds.size}</span>
                                        </div>
                                    </div>
                                </div>

                                <div 
                                    className="relative w-full h-[380px] perspective-1000 cursor-pointer group mb-10"
                                    onClick={() => setIsFlipped(!isFlipped)}
                                >
                                    <div className={`relative w-full h-full transition-all duration-700 transform-style-3d ${isFlipped ? 'rotate-y-180' : ''}`}>
                                        <div className="absolute w-full h-full backface-hidden bg-white rounded-[48px] shadow-xl flex flex-col items-center justify-center p-10 border-2 border-white group-hover:border-indigo-100 transition-all">
                                            <div className="absolute top-10 bg-indigo-50 text-indigo-500 px-4 py-1 rounded-full text-[10px] font-black tracking-widest uppercase">
                                                {currentDeck[currentIndex].cat}
                                            </div>
                                            <h2 className="text-3xl md:text-4xl font-bold text-center text-slate-800 leading-tight break-words w-full">
                                                {currentDeck[currentIndex].de}
                                            </h2>
                                            <div className="absolute bottom-10 flex flex-col items-center gap-2 opacity-40 group-hover:opacity-100 transition-opacity">
                                                <span className="text-[10px] font-black tracking-[0.2em] uppercase text-slate-400">Tap to translate</span>
                                                <i data-lucide="rotate-ccw" className="text-indigo-400"></i>
                                            </div>
                                        </div>

                                        <div className="absolute w-full h-full backface-hidden bg-indigo-600 text-white rounded-[48px] shadow-2xl flex flex-col items-center justify-center p-10 rotate-y-180 border-[10px] border-indigo-500/30">
                                            <span className="text-indigo-200 text-xs font-black tracking-[0.3em] uppercase mb-6">Translation</span>
                                            <h2 className="text-3xl md:text-4xl font-black text-center leading-tight drop-shadow-xl break-words w-full uppercase">
                                                {currentDeck[currentIndex].en}
                                            </h2>
                                        </div>
                                    </div>
                                </div>

                                <div className="grid grid-cols-2 gap-6">
                                    <button 
                                        onClick={(e) => { e.stopPropagation(); handleResponse(false); }}
                                        className="group flex flex-col items-center justify-center py-7 bg-white hover:bg-red-500 text-red-500 hover:text-white rounded-[32px] shadow-lg transition-all border-b-8 border-red-50 hover:border-red-600 active:scale-95 active:border-b-0 active:translate-y-2"
                                    >
                                        <i data-lucide="x" style={{width: 48, height: 48}}></i>
                                        <span className="text-[12px] mt-2 font-black uppercase tracking-widest">Don't Know</span>
                                    </button>

                                    <button 
                                        onClick={(e) => { e.stopPropagation(); handleResponse(true); }}
                                        className="group flex flex-col items-center justify-center py-7 bg-white hover:bg-green-500 text-green-500 hover:text-white rounded-[32px] shadow-lg transition-all border-b-8 border-green-50 hover:border-green-600 active:scale-95 active:border-b-0 active:translate-y-2"
                                    >
                                        <i data-lucide="check" style={{width: 48, height: 48}}></i>
                                        <span className="text-[12px] mt-2 font-black uppercase tracking-widest">I Know It</span>
                                    </button>
                                </div>
                            </>
                        ) : (
                            <div className="bg-white rounded-[56px] shadow-2xl p-10 md:p-14 text-center animate-in border-b-[20px] border-indigo-50">
                                <div className="w-28 h-28 bg-indigo-50 text-indigo-600 rounded-full flex items-center justify-center mx-auto mb-10 ring-[12px] ring-indigo-50/50">
                                    {failedIds.size === 0 ? <i data-lucide="trophy" style={{width: 56, height: 56}}></i> : <i data-lucide="brain" style={{width: 56, height: 56}}></i>}
                                </div>
                                
                                <h2 className="text-4xl font-black mb-5 text-slate-800 tracking-tight uppercase">
                                    {failedIds.size === 0 ? "Excellent!" : "Session Done"}
                                </h2>
                                <p className="text-slate-500 font-semibold mb-12 text-lg leading-relaxed">
                                    {failedIds.size === 0 
                                        ? "Brilliant! You've successfully learned all the words in this collection." 
                                        : <span>You've mastered <strong className="text-green-600 font-black">{learnedIds.size}</strong> words, but <strong className="text-red-500 font-black">{failedIds.size}</strong> still need practice.</span>}
                                </p>
                                
                                <div className="space-y-4 max-w-xs mx-auto">
                                    {failedIds.size > 0 && (
                                        <button 
                                            onClick={startReviewFailed}
                                            className="w-full bg-amber-500 text-white py-5 rounded-3xl font-black text-xl shadow-[0_10px_20px_rgba(245,158,11,0.4)] hover:bg-amber-600 transition-all flex items-center justify-center gap-3 active:scale-95"
                                        >
                                            <i data-lucide="rotate-ccw"></i> Review Mistakes
                                        </button>
                                    )}
                                    
                                    <button 
                                        onClick={() => startNewSession(selectedCategory)}
                                        className="w-full bg-indigo-600 text-white py-5 rounded-3xl font-black text-xl shadow-[0_10px_20px_rgba(79,70,229,0.4)] hover:bg-indigo-700 transition-all flex items-center justify-center gap-3 active:scale-95"
                                    >
                                        New Session <i data-lucide="chevron-right"></i>
                                    </button>
                                    
                                    <button 
                                        onClick={() => { setSelectedCategory("Alle"); startNewSession("Alle"); }}
                                        className="w-full text-slate-400 py-4 font-black text-[11px] uppercase tracking-[0.25em] hover:text-indigo-500 transition-colors mt-4"
                                    >
                                        Reset to all words
                                    </button>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
